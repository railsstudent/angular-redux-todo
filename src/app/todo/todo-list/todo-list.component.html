<div id="todoList">
  <div class="p-2 app-todo-section">
    <div class="item stat">
      <div>
        <span>Number of todo items:</span><span class="badge badge-info">{{ (todos$ | async)?.length }}</span>
      </div>
      <div>
        <span>Outstanding todo items:</span><span class="badge badge-danger">{{ (pendingTodos$ | async)?.length }}</span>
        <i class="fa fa-times text-danger" aria-hidden="true"></i>
      </div>
      <div>
        <span>Completed todo items:</span><span class="badge badge-success">{{ (completedTodos$ | async)?.length }}</span>
        <i class="fa fa-check text-success" aria-hidden="true"></i>
      </div>
    </div>
    <div class="item remove">
      <button (click)="openAllRemove()" class="btn btn-danger" placement="top" ngbTooltip="All tasks will be deleted">Remove all</button>
    </div>
  </div>
  <div *ngIf="(todos$ | async)?.length > 0 else noItems">
    <ngb-tabset [justify]="'justified'">
    <ngb-tab title="All">
      <ng-template ngbTabContent>
          <table class="table table-striped table-bordered">
            <thead class="thead-dark">
              <tr>
                <th>Task</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tr *ngFor="let todo of todos$ | async">
              <td>
                <span [class.app-item-done]="todo.done">{{ todo.value }}</span>
              </td>
              <td>
                <button (click)="openEdit(todo)" *ngIf="!todo.done" class="btn btn-outline-secondary"
                  placement="top" ngbTooltip="Revise this task">
                  Edit
                </button>
                <button (click)="toggleDone(todo)" class="btn btn-outline-secondary" placement="top" ngbTooltip="Mark this task done">
                  Toggle Done <i class="fa fa-check" aria-hidden="true"></i>
                </button>
                <button (click)="openConfirmDelete(todo)" class="btn btn-outline-danger" placement="top"
                  ngbTooltip="This task will be deleted" *ngIf="!todo.done">
                  <i class="fa fa-trash-o" aria-hidden="true"></i>
                </button>
              </td>
            </tr>
          </table>
      </ng-template>
    </ngb-tab>
    <ngb-tab title="Active">
      <ng-template ngbTabContent>
        <table class="table table-striped table-bordered">
          <thead class="thead-dark">
            <tr>
              <th>Task</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tr *ngFor="let todo of pendingTodos$ | async">
            <td>
              <span [class.app-item-done]="todo.done">{{ todo.value }}</span>
            </td>
            <td>
              <button (click)="openEdit(todo)" *ngIf="!todo.done" class="btn btn-outline-secondary"
                placement="top" ngbTooltip="Revise this task">
                Edit
              </button>
              <button (click)="toggleDone(todo)" class="btn btn-outline-secondary" placement="top" ngbTooltip="Mark this task done">
                Toggle Done <i class="fa fa-check" aria-hidden="true"></i>
              </button>
              <button (click)="openConfirmDelete(todo)" class="btn btn-outline-danger" placement="top"
                ngbTooltip="This task will be deleted" *ngIf="!todo.done">
                <i class="fa fa-trash-o" aria-hidden="true"></i>
              </button>
            </td>
          </tr>
        </table>
      </ng-template>
    </ngb-tab>
    <ngb-tab title="Completed">
      <ng-template ngbTabContent>
        <table class="table table-striped table-bordered">
          <thead class="thead-dark">
            <tr>
              <th>Completed Task</th>
            </tr>
          </thead>
          <tr *ngFor="let todo of completedTodos$ | async">
            <td>
              <span>{{ todo.value }}</span>
            </td>
          </tr>
        </table>
      </ng-template>
    </ngb-tab>
    </ngb-tabset>
  </div>
</div>

<ng-template #noItems>
  <div class="m-3 card bg-primary text-white">
    <div class="card-body">
      <p class="card-text">No todo item. You can start to create some!!!</p>
    </div>
  </div>
</ng-template>
